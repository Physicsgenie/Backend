      $problem = $wpdb->get_results("SELECT * FROM wordpress.pg_problems WHERE (SELECT curr_topics FROM wordpress.pg_users WHERE user_id = 1) LIKE CONCAT('%', topic, '%') AND (SELECT curr_foci FROM wordpress.pg_users WHERE user_id = ".get_current_user_id().") LIKE CONCAT('%', main_focus, '%') AND difficulty > (SELECT curr_diff FROM wordpress.pg_users WHERE user_id = 1) AND difficulty <= (SELECT curr_diff FROM wordpress.pg_users WHERE user_id = ".get_current_user_id().") + IF((SELECT curr_diff FROM wordpress.pg_users WHERE user_id = ".get_current_user_id().") = 2, 3, 2) AND IF((SELECT calculus FROM wordpress.pg_users WHERE user_id = ".get_current_user_id()."), true, calculus != 'Required') AND problem_id NOT IN (SELECT problem_id FROM wordpress.pg_user_problems WHERE user_id = ".get_current_user_id().") ORDER BY RAND() LIMIT 1;", OBJECT);

